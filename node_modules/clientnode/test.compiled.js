'use strict';if(typeof module!=='undefined'&&eval('typeof require')!=='undefined'&&'main'in eval('require')&&eval('typeof require.main')!=='undefined'){var ORIGINAL_MAIN_MODULE=module;if(module!==eval('require.main')&&'paths'in module&&'paths'in eval('require.main')&&typeof __dirname!=='undefined')module.paths=eval('require.main.paths').concat(module.paths.filter(function(path){return eval('require.main.paths').includes(path)}))};if(typeof window==='undefined')var window=typeof global==='undefined'?{}:global;!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("clientnode"),require("jquery"),require("weboptimizer/browserAPI.compiled"),require("colors"),require("fs"),require("path"),require("qunit"),require("rimraf"),require("stream")):"function"==typeof define&&define.amd?define("clientnode",["clientnode","jquery","weboptimizer/browserAPI.compiled","colors","fs","path","qunit","rimraf","stream"],t):"object"==typeof exports?exports.clientnode=t(require("clientnode"),require("jquery"),require("weboptimizer/browserAPI.compiled"),require("colors"),require("fs"),require("path"),require("qunit"),require("rimraf"),require("stream")):e.clientnode=t(e.clientnode,e.jQuery,e["weboptimizer/browserAPI.compiled"],e.colors,e.fs,e.path,e.qunit,e.rimraf,e.stream)}(global,function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__2__,__WEBPACK_EXTERNAL_MODULE__5__,__WEBPACK_EXTERNAL_MODULE__6__,__WEBPACK_EXTERNAL_MODULE__7__,__WEBPACK_EXTERNAL_MODULE__8__,__WEBPACK_EXTERNAL_MODULE__9__,__WEBPACK_EXTERNAL_MODULE__10__){return function(e){function t(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,s){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)t.d(s,o,function(t){return e[t]}.bind(null,o));return s},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__0__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__2__},function(e,t,a){e.exports=a(4)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(__filename){var clientnode__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),clientnode__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(clientnode__WEBPACK_IMPORTED_MODULE_0__),weboptimizer_browserAPI_compiled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),weboptimizer_browserAPI_compiled__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(weboptimizer_browserAPI_compiled__WEBPACK_IMPORTED_MODULE_1__);if(!("fetch"in clientnode__WEBPACK_IMPORTED_MODULE_0__.globalContext))try{clientnode__WEBPACK_IMPORTED_MODULE_0__.globalContext.fetch=eval("require")("node-fetch")}catch(e){}try{var ChildProcess=eval("require")("child_process").ChildProcess}catch(e){}let synchronousFileSystem,path,QUnit,removeDirectoryRecursivelySync;{__webpack_require__(5),synchronousFileSystem=__webpack_require__(6),path=__webpack_require__(7),QUnit=__webpack_require__(8),removeDirectoryRecursivelySync=__webpack_require__(9).sync;const e=[];let t="";const a=new Set;QUnit.moduleStart(e=>{e.name&&(t="    ",console.info(e.name.bold.blue))}),QUnit.log(t=>{t.result||e.push(t)}),QUnit.testDone(s=>{if(!a.has(s.name))if(a.add(s.name),s.failed){console.info(`${t}✖ ${s.name}`.red);for(const a of e)a.message&&console.warn(`${t}${a.message.red}`),void 0!==a.actual&&console.warn((`${t}actual: `+clientnode__WEBPACK_IMPORTED_MODULE_0___default.a.represent(a.actual,"    ",t)+` (${typeof a.actual}) != `+"expected: "+clientnode__WEBPACK_IMPORTED_MODULE_0___default.a.represent(a.expected,"    ",t)+` (${typeof a.expected})`).red);e.length=0}else console.info(`${t}✔ ${s.name}`.green)});const s=e=>{console.info(`Tests completed in ${e.runtime/1e3} seconds.`.grey);const t=`${e.passed} tests of ${e.total} passed.`;0<e.failed?console.warn(`${t}, ${e.failed} failed.`.red.bold):console.info(`${t}`.green.bold),process.once("exit",()=>process.exit(e.failed))};let o=null;QUnit.done((...e)=>{o&&(clearTimeout(o),o=null),o=setTimeout(()=>{o=setTimeout(()=>{s(...e)})})})}let tests=[{callback:function(e,t,a,s,o,l){this.module(`tools (${e})`),this.test(`constructor (${e})`,e=>e.ok(o)),this.test(`destructor (${e})`,e=>e.strictEqual(o.destructor(),o)),this.test(`initialize (${e})`,e=>{const t=a.Tools({logging:!0}),s=a.Tools({domNodeSelectorPrefix:"body.{1} div.{1}"});e.notOk(o._options.logging),e.ok(t._options.logging),e.strictEqual(s._options.domNodeSelectorPrefix,"body.tools div.tools")}),this.test(`controller (${e})`,e=>{e.strictEqual(o.controller(o,[]),o),e.strictEqual(o.controller(a.Tools.class,[],a("body")).constructor.name,a.Tools.class.name)}),this.test(`acquireLock|releaseLock (${e})`,async e=>{const t=e.async();let s=!1;await o.acquireLock("test",()=>{s=!0}),e.ok(s),e.ok(o.acquireLock("test",()=>{s=!1})instanceof Promise),e.ok(s),e.ok(a.Tools().releaseLock("test")instanceof Promise),e.ok(s),e.ok(o.releaseLock("test")instanceof Promise),e.notOk(s),e.ok(o.releaseLock("test")instanceof Promise),e.notOk(s),await o.acquireLock("test",()=>{s=!0}),e.ok(s),e.ok(o.acquireLock("test",()=>{s=!1})instanceof Promise),e.ok(s),e.ok(o.acquireLock("test",()=>{s=!0})instanceof Promise),e.ok(s),o.releaseLock("test"),e.notOk(s),o.releaseLock("test"),e.ok(s),o.acquireLock("test").then(async l=>{e.strictEqual(l,"test"),a.Tools.class.timeout(()=>o.releaseLock("test")),l=await o.acquireLock("test"),e.strictEqual(l,"test"),a.Tools.class.timeout(()=>o.releaseLock("test")),l=await o.acquireLock("test",()=>new Promise(async e=>{await a.Tools.class.timeout(),e(s=!1)})),e.notOk(s),t()}),o.releaseLock("test")}),this.test(`getSemaphore (${e})`,async e=>{const t=a.Tools.class.getSemaphore(2);e.strictEqual(t.queue.length,0),e.strictEqual(t.numberOfFreeResources,2),e.strictEqual(t.numberOfResources,2),await t.acquire(),e.strictEqual(t.queue.length,0),e.strictEqual(t.numberOfFreeResources,1),e.strictEqual(t.numberOfResources,2),await t.acquire(),e.strictEqual(t.queue.length,0),e.strictEqual(t.numberOfFreeResources,0),t.acquire(),e.strictEqual(t.queue.length,1),e.strictEqual(t.numberOfFreeResources,0),t.acquire(),e.strictEqual(t.queue.length,2),e.strictEqual(t.numberOfFreeResources,0),t.release(),e.strictEqual(t.queue.length,1),e.strictEqual(t.numberOfFreeResources,0),t.release(),e.strictEqual(t.queue.length,0),e.strictEqual(t.numberOfFreeResources,0),t.release(),e.strictEqual(t.queue.length,0),e.strictEqual(t.numberOfFreeResources,1),t.release(),e.strictEqual(t.queue.length,0),e.strictEqual(t.numberOfFreeResources,2),t.release(),e.strictEqual(t.queue.length,0),e.strictEqual(t.numberOfFreeResources,3)}),this.test(`isNumeric (${e})`,e=>{for(const t of[0,1,"-10","0",255,"0xFF","8e5","3.1415",10])e.ok(a.Tools.class.isNumeric(t));for(const t of[null,void 0,!1,!0,"","a",{},/a/,"-0x42","7.2acdgs",NaN,1/0])e.notOk(a.Tools.class.isNumeric(t))}),this.test(`isWindow (${e})`,e=>{e.ok(a.Tools.class.isWindow(s.window));for(const t of[null,{},s])e.notOk(a.Tools.class.isWindow(t))}),this.test(`isArrayLike (${e})`,e=>{for(const t of[[],window.document.querySelectorAll("*")])e.ok(a.Tools.class.isArrayLike(t));for(const t of[{},null,void 0,!1,!0,/a/])e.notOk(a.Tools.class.isArrayLike(t))}),this.test(`isAnyMatching (${e})`,e=>{for(const t of[["",[""]],["test",[/test/]],["test",[/a/,/b/,/es/]],["test",["","test"]]])e.ok(a.Tools.class.isAnyMatching(...t));for(const t of[["",[]],["test",[/tes$/]],["test",[/^est/]],["test",[/^est$/]],["test",["a"]]])e.notOk(a.Tools.class.isAnyMatching(...t))}),this.test(`isPlainObject (${e})`,e=>{for(const t of[{},{a:1},{}])e.ok(a.Tools.class.isPlainObject(t));for(const t of[new String,Object,null,0,1,!0,void 0])e.notOk(a.Tools.class.isPlainObject(t))}),this.test(`isFunction (${e})`,e=>{for(const t of[Object,new Function("return 1"),function(){},()=>{},async()=>{}])e.ok(a.Tools.class.isFunction(t));for(const t of[null,!1,0,1,void 0,{},new Boolean])e.notOk(a.Tools.class.isFunction(t))}),this.test(`mouseOutEventHandlerFix (${e})`,e=>e.ok(a.Tools.class.mouseOutEventHandlerFix(()=>{}))),this.test(`log (${e})`,e=>e.strictEqual(o.log("test"),o)),this.test(`info (${e})`,e=>e.strictEqual(o.info("test {0}"),o)),this.test(`debug (${e})`,e=>e.strictEqual(o.debug("test"),o)),this.skip(`${e}-error`,e=>e.strictEqual(o.error("ignore this error, it is only a {1}","test"),o)),this.test(`warn (${e})`,e=>e.strictEqual(o.warn("test"),o)),this.test(`show (${e})`,e=>{for(const t of[[1,'1 (Type: "number")'],[null,'null (Type: "null")'],[/a/,'/a/ (Type: "regexp")'],["hans",'hans (Type: "string")'],[{A:"a",B:"b"},'A: a (Type: "string")\nB: b (Type: "string")']])e.strictEqual(a.Tools.class.show(t[0]),t[1]);e.ok(/^[\0-\u{10FFFF}]+\(Type: "function"\)$/u.test(a.Tools.class.show(a.Tools.class.noop)))}),"full"===e&&(this.test(`get normalizedClassNames (${e})`,e=>{e.strictEqual(a("<div>").Tools("normalizedClassNames").$domNode.prop("outerHTML"),a("<div>").prop("outerHTML")),e.strictEqual(a("<div class>").Tools("normalizedClassNames").$domNode.html(),a("<div>").html()),e.strictEqual(a('<div class="">').Tools("normalizedClassNames").$domNode.html(),a("<div>").html()),e.strictEqual(a('<div class="a">').Tools("normalizedClassNames").$domNode.prop("outerHTML"),a('<div class="a">').prop("outerHTML")),e.strictEqual(a('<div class="b a">').Tools("normalizedClassNames").$domNode.prop("outerHTML"),a('<div class="a b">').prop("outerHTML")),e.strictEqual(a('<div class="b a"><pre class="c b a"></pre></div>').Tools("normalizedClassNames").$domNode.prop("outerHTML"),a('<div class="a b"><pre class="a b c"></pre></div>').prop("outerHTML"))}),this.test(`get normalizedStyles (${e})`,e=>{e.strictEqual(a("<div>").Tools("normalizedStyles").$domNode.prop("outerHTML"),a("<div>").prop("outerHTML")),e.strictEqual(a("<div style>").Tools("normalizedStyles").$domNode.html(),a("<div>").html()),e.strictEqual(a('<div style="">').Tools("normalizedStyles").$domNode.html(),a("<div>").html()),e.strictEqual(a('<div style="border: 1px solid  red ;">').Tools("normalizedStyles").$domNode.prop("outerHTML"),a('<div style="border:1px solid red">').prop("outerHTML")),e.strictEqual(a('<div style="width: 50px;height: 100px;">').Tools("normalizedStyles").$domNode.prop("outerHTML"),a('<div style="height:100px;width:50px">').prop("outerHTML")),e.strictEqual(a('<div style=";width: 50px ; height:100px">').Tools("normalizedStyles").$domNode.prop("outerHTML"),a('<div style="height:100px;width:50px">').prop("outerHTML")),e.strictEqual(a('<div style="width:10px;height:50px">    <pre style=";;width:2px;height:1px; color: red; "></pre></div>').Tools("normalizedStyles").$domNode.prop("outerHTML"),a('<div style="height:50px;width:10px">    <pre style="color:red;height:1px;width:2px"></pre></div>').prop("outerHTML"))}),this.test(`get style (${e})`,e=>{for(const t of[["<span>",{}],["<span>hans</span>",{}],['<span style="display:block"></span>',{display:"block"}],['<span style="display:block;height:100px;"></span>',{display:"block",height:"100px"}]]){const s=a(t[0]);l.append(s);const o=s.Tools("style");for(const a in t[1])t[1].hasOwnProperty(a)&&(e.ok(o.hasOwnProperty(a)),e.strictEqual(o[a],t[1][a]));s.remove()}}),this.test(`get text (${e})`,e=>{for(const t of[["<div>",""],["<div>hans</div>","hans"],["<div><div>hans</div</div>",""],["<div>hans<div>peter</div></div>","hans"]])e.strictEqual(a(t[0]).Tools("text"),t[1])}),this.test(`isEquivalentDOM (${e})`,e=>{for(const t of[["test","test"],["test test","test test"],["<div>","<div>"],["<div class>","<div>"],['<div class="">',"<div>"],["<div style>","<div>"],['<div style="">',"<div>"],["<div></div>","<div>"],['<div class="a"></div>','<div class="a"></div>'],[a('<a target="_blank" class="a"></a>'),'<a class="a" target="_blank"></a>'],['<a target="_blank" class="a"></a>','<a class="a" target="_blank"></a>'],['<a target="_blank" class="a"><div b="3" a="2"></div></a>','<a class="a" target="_blank"><div a="2" b="3"></div></a>'],['<a target="_blank" class="b a">   <div b="3" a="2"></div></a>','<a class="a b" target="_blank">   <div a="2" b="3"></div></a>'],["<div>a</div><div>b</div>","<div>a</div><div>b</div>"],["<div>a</div>b","<div>a</div>b"],["<br>","<br />"],["<div><br><br /></div>","<div><br /><br /></div>"],[' <div style="">german\x3c!--deDE--\x3e\x3c!--enUS: english --\x3e </div>',' <div style="">german\x3c!--deDE--\x3e\x3c!--enUS: english --\x3e </div>'],["a<br>","a<br />",!0]])e.ok(a.Tools.class.isEquivalentDOM(...t));for(const t of[["test",""],["test","hans"],["test test","testtest"],["test test:",""],['<div class="a"></div>',"<div>"],[a('<a class="a"></a>'),'<a class="a" target="_blank"></a>'],['<a target="_blank" class="a"><div a="2"></div></a>','<a class="a" target="_blank"></a>'],["<div>a</div>b","<div>a</div>c"],[" <div>a</div>","<div>a</div>"],["<div>a</div><div>bc</div>","<div>a</div><div>b</div>"],["text","text a"],["text","text a"],["text","text a & +"]])e.notOk(a.Tools.class.isEquivalentDOM(...t))})),"full"===e&&this.test(`getPositionRelativeToViewport (${e})`,e=>e.ok(["above","left","right","below","in"].includes(o.getPositionRelativeToViewport()))),this.test(`generateDirectiveSelector (${e})`,e=>{for(const t of[["a-b","a-b, .a-b, [a-b], [data-a-b], [x-a-b], [a\\:b], [a_b]"],["aB","a-b, .a-b, [a-b], [data-a-b], [x-a-b], [a\\:b], [a_b]"],["a","a, .a, [a], [data-a], [x-a]"],["aa","aa, .aa, [aa], [data-aa], [x-aa]"],["aaBB","aa-bb, .aa-bb, [aa-bb], [data-aa-bb], [x-aa-bb], [aa\\:bb], [aa_bb]"],["aaBbCcDd","aa-bb-cc-dd, .aa-bb-cc-dd, [aa-bb-cc-dd], [data-aa-bb-cc-dd], [x-aa-bb-cc-dd], [aa\\:bb\\:cc\\:dd], [aa_bb_cc_dd]"],["mceHREF","mce-href, .mce-href, [mce-href], [data-mce-href], [x-mce-href], [mce\\:href], [mce_href]"]])e.strictEqual(a.Tools.class.generateDirectiveSelector(t[0]),t[1])}),"full"===e&&this.test(`removeDirective (${e})`,e=>{const t=l.Tools("removeDirective","a");e.equal(t.Tools().removeDirective("a"),t)}),this.test(`getNormalizedDirectiveName (${e})`,e=>{for(const t of[["data-a","a"],["x-a","a"],["data-a-bb","aBb"],["x:a:b","aB"]])e.equal(a.Tools.class.getNormalizedDirectiveName(t[0]),t[1])}),"full"===e&&this.test(`getDirectiveValue (${e})`,e=>e.equal(a("body").Tools("getDirectiveValue","a"),null)),this.test(`sliceDomNodeSelectorPrefix (${e})`,e=>{e.strictEqual(o.sliceDomNodeSelectorPrefix("body div"),"div"),e.strictEqual(a.Tools({domNodeSelectorPrefix:"body div"}).sliceDomNodeSelectorPrefix("body div"),""),e.strictEqual(a.Tools({domNodeSelectorPrefix:""}).sliceDomNodeSelectorPrefix("body div"),"body div")}),this.test(`getDomNodeName (${e})`,e=>{for(const t of[["div","div"],["<div>","div"],["<div />","div"],["<div></div>","div"],["a","a"],["<a>","a"],["<a />","a"],["<a></a>","a"]])e.strictEqual(a.Tools.class.getDomNodeName(t[0]),t[1])}),"full"===e&&this.test(`grabDomNode (${e})`,e=>{for(const t of[[[{qunit:"body div#qunit",qunitFixture:"body div#qunit-fixture"}],{qunit:a("body div#qunit"),qunitFixture:a("body div#qunit-fixture"),parent:a("body")}],[[{qunit:"div#qunit",qunitFixture:"div#qunit-fixture"}],{parent:a("body"),qunit:a("body div#qunit"),qunitFixture:a("body div#qunit-fixture")}],[[{qunit:"div#qunit",qunitFixture:"div#qunit-fixture"},"body"],{parent:a("body"),qunit:a("body").find("div#qunit"),qunitFixture:a("body").find("div#qunit-fixture")}]]){const a=o.grabDomNode(...t[0]);delete a.window,delete a.document,e.deepEqual(a,t[1])}}),this.test(`isolateScope (${e})`,e=>{e.deepEqual(a.Tools.class.isolateScope({}),{}),e.deepEqual(a.Tools.class.isolateScope({a:2}),{a:2}),e.deepEqual(a.Tools.class.isolateScope({a:2,b:{a:[1,2]}}),{a:2,b:{a:[1,2]}});let t=function(){this.a=2};t.prototype={b:2,_a:5},t=new t,e.deepEqual(a.Tools.class.isolateScope(t,["_"]),{_a:5,a:2,b:void 0}),t.b=3,e.deepEqual(a.Tools.class.isolateScope(t,["_"]),{_a:5,a:2,b:3}),e.deepEqual(a.Tools.class.isolateScope(t),{_a:void 0,a:2,b:3}),t._a=6,e.deepEqual(a.Tools.class.isolateScope(t,["_"]),{_a:6,a:2,b:3}),(t=function(){this.a=2}).prototype={b:3},e.deepEqual(a.Tools.class.isolateScope(new t,["b"]),{a:2,b:3}),e.deepEqual(a.Tools.class.isolateScope(new t),{a:2,b:void 0})}),this.test(`determineUniqueScopeName (${e})`,e=>{e.ok(a.Tools.class.determineUniqueScopeName().startsWith("callback")),e.ok(a.Tools.class.determineUniqueScopeName("hans").startsWith("hans")),e.ok(a.Tools.class.determineUniqueScopeName("hans","",{}).startsWith("hans")),e.strictEqual(a.Tools.class.determineUniqueScopeName("hans","",{},"peter"),"peter"),e.ok(a.Tools.class.determineUniqueScopeName("hans","",{peter:2},"peter").startsWith("hans"));const t=a.Tools.class.determineUniqueScopeName("hans","klaus",{peter:2},"peter");e.ok(t.startsWith("hans")),e.ok(t.endsWith("klaus")),e.ok(t.length>9)}),this.test(`getParameterNames (${e})`,e=>{for(const t of[[function(){},[]],["function() {}",[]],["function(a, /* asd*/ b, c/**/) {}",["a","b","c"]],["(a, /*asd*/b, c/**/) => {}",["a","b","c"]],["(a, /*asd*/b, c/**/) => {\n                return 2\n            }",["a","b","c"]],["(a, /* asd*/b, c/* */) => 2",["a","b","c"]],["(a, /* asd*/b = 2, c/* */) => 2",["a","b","c"]],["a => 2",["a"]],["class A {\n                constructor(a, b, c) {}\n                a() {}\n            }",["a","b","c"]]])e.deepEqual(a.Tools.class.getParameterNames(t[0]),t[1])}),this.test(`identity (${e})`,e=>{for(const t of[[2,2],["",""],[void 0,void 0],[null,null],["hans","hans"]])e.strictEqual(a.Tools.class.identity(t[0]),t[1]);e.ok({}!==a.Tools.class.identity({}));const t={};e.strictEqual(a.Tools.class.identity(t),t)}),this.test(`invertArrayFilter (${e})`,e=>{e.deepEqual(a.Tools.class.invertArrayFilter(a.Tools.class.arrayDeleteEmptyItems)([{a:null}]),[{a:null}]),e.deepEqual(a.Tools.class.invertArrayFilter(a.Tools.class.arrayExtractIfMatches)(["a","b"],"^a$"),["b"])}),this.test(`timeout (${e})`,async e=>{const t=e.async();e.notOk(await a.Tools.class.timeout()),e.notOk(await a.Tools.class.timeout(0)),e.notOk(await a.Tools.class.timeout(1)),e.ok(a.Tools.class.timeout()instanceof Promise),e.ok(a.Tools.class.timeout().hasOwnProperty("clear"));let s=!1;const o=a.Tools.class.timeout(1e20,!0);o.catch(()=>{s=!0}),o.clear();let l=!1;e.notOk(await a.Tools.class.timeout(()=>{l=!0})),e.ok(s),e.ok(l),t()}),this.test(`debounce (${e})`,e=>{let t=!1;a.Tools.class.debounce(()=>{t=!0})(),e.ok(t);const s=a.Tools.class.debounce(()=>{t=!t},1e3);s(),s(),e.notOk(t)}),this.test(`fireEvent (${e})`,e=>{e.strictEqual(a.Tools({onClick:()=>2}).fireEvent("click",!0),2),e.notOk(a.Tools({onClick:()=>!1}).fireEvent("click",!0)),e.ok(o.fireEvent("click")),o.onClick=()=>3,e.strictEqual(o.fireEvent("click"),!0),e.strictEqual(o.fireEvent("click",!0),!0)}),"full"===e&&(this.test(`on (${e})`,e=>{let t=!1;e.strictEqual(o.on("body","click",()=>{t=!0})[0],a("body")[0]),a("body").trigger("click"),e.ok(t)}),this.test(`off (${e})`,e=>{let t=!1;e.strictEqual(o.on("body","click",()=>{t=!0})[0],a("body")[0]),e.strictEqual(o.off("body","click")[0],a("body")[0]),a("body").trigger("click"),e.notOk(t)})),this.test(`addDynamicGetterAndSetter (${e})`,e=>{e.strictEqual(a.Tools.class.addDynamicGetterAndSetter(null),null),e.strictEqual(a.Tools.class.addDynamicGetterAndSetter(!0),!0),e.deepEqual(a.Tools.class.addDynamicGetterAndSetter({a:2}),{a:2}),e.notOk(a.Tools.class.addDynamicGetterAndSetter({}).__target__ instanceof Object),e.ok(a.Tools.class.addDynamicGetterAndSetter({},e=>e).__target__ instanceof Object);const t={};e.strictEqual(a.Tools.class.addDynamicGetterAndSetter(t),t),e.strictEqual(a.Tools.class.addDynamicGetterAndSetter(t,e=>e).__target__,t),e.deepEqual(a.Tools.class.addDynamicGetterAndSetter({a:1},e=>e+2).a,3),e.deepEqual(a.Tools.class.addDynamicGetterAndSetter({a:{a:1}},e=>e instanceof Object?e:e+2).a.a,3),e.deepEqual(a.Tools.class.addDynamicGetterAndSetter({a:{a:[{a:1}]}},e=>e instanceof Object?e:e+2).a.a[0].a,3),e.deepEqual(a.Tools.class.addDynamicGetterAndSetter({a:{a:1}},e=>e instanceof Object?e:e+2,null,{has:"hasOwnProperty"},!1).a.a,1),e.deepEqual(a.Tools.class.addDynamicGetterAndSetter({a:1},e=>e instanceof Object?e:e+2,null,{has:"hasOwnProperty"},!1,[]).a,1),e.deepEqual(a.Tools.class.addDynamicGetterAndSetter({a:new Map([["a",1]])},e=>e instanceof Object?e:e+2,null,{delete:"delete",get:"get",set:"set",has:"has"},!0,[Map]).a.a,3)}),this.test(`convertCircularObjectToJSON (${e})`,e=>{const t={};t.a={a:t};for(const s of[[{},"{}"],[{a:null},'{"a":null}'],[{a:{a:2}},'{"a":{"a":2}}'],[{a:{a:1/0}},'{"a":{"a":null}}'],[t,'{"a":{"a":"__circularReference__"}}']])e.deepEqual(a.Tools.class.convertCircularObjectToJSON(s[0]),s[1])}),this.test(`convertMapToPlainObject (${e})`,e=>{for(const t of[[[null],null],[[!0],!0],[[0],0],[[2],2],[["a"],"a"],[[new Map],{}],[[[new Map]],[{}]],[[[new Map],!1],[new Map]],[[[new Map([["a",2],[2,2]])]],[{a:2,2:2}]],[[[new Map([["a",new Map],[2,2]])]],[{a:{},2:2}]],[[[new Map([["a",new Map([["a",2]])],[2,2]])]],[{a:{a:2},2:2}]]])e.deepEqual(a.Tools.class.convertMapToPlainObject(...t[0]),t[1])}),this.test(`convertPlainObjectToMap (${e})`,e=>{for(const t of[[[null],null],[[!0],!0],[[0],0],[[2],2],[["a"],"a"],[[{}],new Map],[[[{}]],[new Map]],[[[{}],!1],[{}]],[[[{a:{},b:2}]],[new Map([["a",new Map],["b",2]])]],[[[{b:2,a:{}}]],[new Map([["a",new Map],["b",2]])]],[[[{b:2,a:new Map}]],[new Map([["a",new Map],["b",2]])]],[[[{b:2,a:[{}]}]],[new Map([["a",[new Map]],["b",2]])]],[[[{b:2,a:new Set([{}])}]],[new Map([["a",new Set([new Map])],["b",2]])]]])e.deepEqual(a.Tools.class.convertPlainObjectToMap(...t[0]),t[1])}),this.test(`convertSubstringInPlainObject (${e})`,e=>{for(const t of[[{},/a/,"",{}],[{a:"a"},/a/,"b",{a:"b"}],[{a:"aa"},/a/,"b",{a:"ba"}],[{a:"aa"},/a/g,"b",{a:"bb"}],[{a:{a:"aa"}},/a/g,"b",{a:{a:"bb"}}]])e.deepEqual(a.Tools.class.convertSubstringInPlainObject(t[0],t[1],t[2]),t[3])}),this.test(`copy (${e})`,e=>{for(const t of[[[21],21],[[0,-1],0],[[0,1],0],[[0,10],0],[[new Date(0)],new Date(0)],[[/a/],/a/],[[{}],{}],[[{},-1],{}],[[[]],[]],[[new Map,-1],new Map],[[new Set,-1],new Set],[[{a:2},0],{a:2}],[[{a:{a:2}},0],{a:null}],[[{a:{a:2}},1],{a:{a:2}}],[[{a:{a:2}},2],{a:{a:2}}],[[{a:[{a:2}]},1],{a:[null]}],[[{a:[{a:2}]},2],{a:[{a:2}]}],[[{a:{a:2}},10],{a:{a:2}}],[[new Map([["a",2]]),0],new Map([["a",2]])],[[new Map([["a",new Map([["a",2]])]]),0],new Map([["a",null]])],[[new Map([["a",new Map([["a",2]])]]),1],new Map([["a",new Map([["a",2]])]])],[[new Map([["a",new Map([["a",2]])]]),2],new Map([["a",new Map([["a",2]])]])],[[new Map([["a",[new Map([["a",2]])]]]),1],new Map([["a",[null]]])],[[new Map([["a",[new Map([["a",2]])]]]),2],new Map([["a",[new Map([["a",2]])]]])],[[new Map([["a",new Map([["a",2]])]]),10],new Map([["a",new Map([["a",2]])]])],[[new Map([["a",new Map([["a",2]])]]),10],new Map([["a",new Map([["a",2]])]])],[[new Set(["a",2]),0],new Set(["a",2])],[[new Set(["a",new Set(["a",2])]),0],new Set(["a",null])],[[new Set(["a",new Set(["a",2])]),1],new Set(["a",new Set(["a",2])])],[[new Set(["a",new Set(["a",2])]),2],new Set(["a",new Set(["a",2])])],[[new Set(["a",[new Set(["a",2])]]),1],new Set(["a",[null]])],[[new Set(["a",[new Set(["a",2])]]),2],new Set(["a",[new Set(["a",2])]])],[[new Set(["a",new Set(["a",2])]),10],new Set(["a",new Set(["a",2])])],[[new Set(["a",new Set(["a",2])]),10],new Set(["a",new Set(["a",2])])]])e.deepEqual(a.Tools.class.copy(...t[0]),t[1])}),this.test(`determineType (${e})`,e=>{e.strictEqual(a.Tools.class.determineType(),"undefined");for(const t of[[void 0,"undefined"],[{}.notDefined,"undefined"],[null,"null"],[!0,"boolean"],[new Boolean,"boolean"],[3,"number"],[new Number(3),"number"],["","string"],[new String(""),"string"],["test","string"],[new String("test"),"string"],[function(){},"function"],[()=>{},"function"],[[],"array"],[[],"array"],[new Date,"date"],[new Error,"error"],[new Map,"map"],[new Set,"set"],[/test/,"regexp"]])e.strictEqual(a.Tools.class.determineType(t[0]),t[1])}),this.test(`equals (${e})`,async e=>{const t=e.async(),s=()=>{};for(const t of[[1,1],[new Date,new Date],[new Date(1995,11,17),new Date(1995,11,17)],[/a/,/a/],[{a:2},{a:2}],[{a:2,b:3},{a:2,b:3}],[[1,2,3],[1,2,3]],[[],[]],[{},{}],[new Map,new Map],[new Set,new Set],[[1,2,3,{a:2}],[1,2,3,{a:2}]],[[1,2,3,new Map([["a",2]])],[1,2,3,new Map([["a",2]])]],[[1,2,3,new Set(["a",2])],[1,2,3,new Set(["a",2])]],[[1,2,3,[1,2]],[1,2,3,[1,2]]],[[{a:1}],[{a:1}]],[[{a:1,b:1}],[{a:1}],[]],[[{a:1,b:1}],[{a:1}],["a"]],[2,2,0],[[{a:1,b:1}],[{a:1}],null,0],[[{a:1},{b:1}],[{a:1},{b:1}],null,1],[[{a:{b:1}},{b:1}],[{a:1},{b:1}],null,1],[[{a:{b:1}},{b:1}],[{a:{b:1}},{b:1}],null,2],[[{a:{b:{c:1}}},{b:1}],[{a:{b:1}},{b:1}],null,2],[[{a:{b:{c:1}}},{b:1}],[{a:{b:1}},{b:1}],null,3,["b"]],[s,s]])e.ok(a.Tools.class.equals(...t));e.ok(a.Tools.class.equals(Buffer.from("a"),Buffer.from("a"),null,-1,[],!0,!0));for(const t of[[[{a:{b:1}},{b:1}],[{a:1},{b:1}],null,2],[[{a:{b:{c:1}}},{b:1}],[{a:{b:1}},{b:1}],null,3],[new Date(1995,11,17),new Date(1995,11,16)],[/a/i,/a/],[1,2],[{a:2,b:3},{a:2}],[[1,2,3,4],[1,2,3,5]],[[1,2,3,4],[1,2,3]],[[1,2,3,{a:2}],[1,2,3,{b:2}]],[[1,2,3,new Map([["a",2]])],[1,2,3,new Map([["b",2]])]],[[1,2,3,new Set(["a",2])],[1,2,3,new Set(["b",2])]],[[1,2,3,[1,2]],[1,2,3,[1,2,3]]],[[1,2,3,[1,2,3]],[1,2,3,[1,2]]],[[1,2,3,[1,2,3]],[1,2,3,[1,2,{}]]],[[{a:1,b:1}],[{a:1}]],[[{a:1,b:1}],[{a:1}],["a","b"]],[1,2,0],[[{a:1},{b:1}],[{a:1}],null,1],[()=>{},()=>{},null,-1,[],!1]])e.notOk(a.Tools.class.equals(...t));const o=()=>{};e.ok(a.Tools.class.equals(o,o,null,-1,[],!1)),t()}),this.test(`evaluateDynamicDataStructure (${e})`,e=>{for(const t of[[[null],null],[[!1],!1],[["1"],"1"],[[3],3],[[{}],{}],[[{a:null}],{a:null}],[[{__evaluate__:"1 + 3"}],4],[[[{__evaluate__:"1"}]],[1]],[[[{__evaluate__:"'1'"}]],["1"]],[[{a:{__evaluate__:"'a'"}}],{a:"a"}],[[{a:{__evaluate__:"1"}}],{a:1}],[[{a:{__evaluate__:"self.b"},b:2},{},"self","__run__"],{a:{__evaluate__:"self.b"},b:2}],[[{a:{__run:"_.b"},b:1},{},"_","__run"],{a:1,b:1}],[[{a:[{__run:"self.b"}],b:1},{},"self","__run"],{a:[1],b:1}],[[{a:{__evaluate__:"self.b"},b:2}],{a:2,b:2}],[[{a:{__evaluate__:"c.b"},b:2},{},"c"],{a:2,b:2}],[[{a:{__evaluate__:"self.b"},b:{__evaluate__:"self.c"},c:2}],{a:2,b:2,c:2}],[[{a:{__execute__:"return self.b"},b:{__execute__:"return self.c"},c:{__execute__:"return self.d"},d:{__execute__:"return self.e"},e:{__execute__:"return self.f"},f:3}],{a:3,b:3,c:3,d:3,e:3,f:3}],[[{a:{__evaluate__:"self.b.d.e"},b:{__evaluate__:"self.c"},c:{d:{e:3}}}],{a:3,b:{d:{e:3}},c:{d:{e:3}}}],[[{n:{__evaluate__:"{a: [1, 2, 3]}"},b:{__evaluate__:"self.c"},f:{__evaluate__:"self.g.h"},d:{__evaluate__:"self.e"},a:{__evaluate__:"self.b"},e:{__evaluate__:"self.f.i"},k:{__evaluate__:'`kk <-> "${self.l.join(\'", "\')}"`'},c:{__evaluate__:"self.d"},o:[{a:2,b:[[[{__evaluate__:"10 ** 2"}]]]}],l:{__evaluate__:"self.m.a"},g:{h:{i:{__evaluate__:"`${self.k} <-> ${self.j}`"}}},m:{a:[1,2,{__evaluate__:"3"}]},j:"jj"}],{a:'kk <-> "1", "2", "3" <-> jj',b:'kk <-> "1", "2", "3" <-> jj',c:'kk <-> "1", "2", "3" <-> jj',d:'kk <-> "1", "2", "3" <-> jj',e:'kk <-> "1", "2", "3" <-> jj',f:{i:'kk <-> "1", "2", "3" <-> jj'},g:{h:{i:'kk <-> "1", "2", "3" <-> jj'}},j:"jj",k:'kk <-> "1", "2", "3"',l:[1,2,3],m:{a:[1,2,3]},n:{a:[1,2,3]},o:[{a:2,b:[[[100]]]}]}],[[{a:{__evaluate__:"_.b.d.e"},b:{__evaluate__:"_.c"},c:{d:{e:{__evaluate__:"tools.copy([2])"}}}},{tools:a.Tools.class},"_"],{a:[2],b:{d:{e:[2]}},c:{d:{e:[2]}}}],[[{a:{b:1,c:{__evaluate__:"self.a.b"}}}],{a:{b:1,c:1}}],[[{a:{b:null,c:{__evaluate__:"self.a.b"}}}],{a:{b:null,c:null}}],[[{a:{b:void 0,c:{__evaluate__:"self.a.b"}}}],{a:{b:void 0,c:void 0}}],[[{a:{b:"jau",c:{__evaluate__:"self.a.b"}}}],{a:{b:"jau",c:"jau"}}],[[{a:{b:{c:"jau",d:{__evaluate__:"self.a.b.c"}}}}],{a:{b:{c:"jau",d:"jau"}}}],[[[1,1],[6,1],[25,3],[28,3],[1,5],[5,5],[16,5],[26,5],[3,10],[1,11],[25,12],[26,12]],[1,1],[6,1],[25,3],[28,3],[1,5],[5,5],[16,5],[26,5],[3,10],[1,11],[25,12],[26,12]],[[{a:{b:{__evaluate__:'"t" + "es" + "t"'},c:{__evaluate__:"removeS(self.a.b)"}}},{removeS:e=>e.replace("s","")}],{a:{b:"test",c:"tet"}}],[[{a:{__evaluate__:"toString(self.b)"},b:{__evaluate__:"'a'"}},{toString:e=>e.toString()}],{a:"a",b:"a"}],[[{a:{__evaluate__:"Object.getOwnPropertyNames(self.b)"},b:{__evaluate__:"{a: 2}"}}],{a:["a"],b:{a:2}}],[[{a:{__evaluate__:"Reflect.ownKeys(self.b)"},b:{__evaluate__:"{a: 2}"}}],{a:["a"],b:{a:2}}],[[{a:{__evaluate__:"Object.getOwnPropertyNames(self.b)"},b:{__evaluate__:"self.c"},c:{__execute__:"return {a: 1, b: 2}"}}],{a:["a","b"],b:{a:1,b:2},c:{a:1,b:2}}],[[{a:{__evaluate__:"Object.keys(resolve(self.b))"},b:{__evaluate__:"{a: 2}"}}],{a:["a"],b:{a:2}}],[[{a:{__evaluate__:"(() => {\n                    const result = []\n                    for (const key in resolve(self.b))\n                        result.push(key)\n                    return result\n                })()"},b:{__evaluate__:"{a: 1, b: 2, c: 3}"}}],{a:["a","b","c"],b:{a:1,b:2,c:3}}]])e.deepEqual(a.Tools.class.copy(a.Tools.class.evaluateDynamicDataStructure(...t[0]),-1,!0),t[1])}),this.test(`extend (${e})`,e=>{for(const t of[[[[]],[]],[[{}],{}],[[{a:1}],{a:1}],[[{a:1},{a:2}],{a:2}],[[{},{a:1},{a:2}],{a:2}],[[{},{a:1},{a:2}],{a:2}],[[{a:1,b:{a:1}},{a:2,b:{b:1}}],{a:2,b:{b:1}}],[[[1,2],[1]],[1]],[[new Map],new Map],[[new Set],new Set],[[new Map([["a",1]])],new Map([["a",1]])],[[new Map([["a",1]]),new Map([["a",2]])],new Map([["a",2]])],[[new Map,new Map([["a",1]]),new Map([["a",2]])],new Map([["a",2]])],[[new Map,new Map([["a",1]]),new Map([["a",2]])],new Map([["a",2]])],[[new Map([["a",1],["b",new Map([["a",1]])]]),new Map([["a",2],["b",new Map([["b",1]])]])],new Map([["a",2],["b",new Map([["b",1]])]])],[[!0,{}],{}],[[!0,{a:1,b:{a:1}},{a:2,b:{b:1}}],{a:2,b:{a:1,b:1}}],[[!0,{a:1,b:{a:[]}},{a:2,b:{b:1}}],{a:2,b:{a:[],b:1}}],[[!0,{a:{a:[1,2]}},{a:{a:[3,4]}}],{a:{a:[3,4]}}],[[!0,{a:{a:[1,2]}},{a:{a:null}}],{a:{a:null}}],[[!0,{a:{a:[1,2]}},{a:!0}],{a:!0}],[[!0,{a:{_a:1}},{a:{b:2}}],{a:{_a:1,b:2}}],[[!1,{_a:1},{a:2}],{a:2,_a:1}],[[!0,{a:{a:[1,2]}},!1],!1],[[!0,{a:{a:[1,2]}},void 0],void 0],[[!0,{a:1},{a:2},{a:3}],{a:3}],[[!0,[1],[1,2]],[1,2]],[[!0,[1,2],[1]],[1]],[[!0,new Map],new Map],[[!0,new Map([["a",1],["b",new Map([["a",1]])]]),new Map([["a",2],["b",new Map([["b",1]])]])],new Map([["a",2],["b",new Map([["a",1],["b",1]])]])],[[!0,new Map([["a",1],["b",new Map([["a",[]]])]]),new Map([["a",2],["b",new Map([["b",1]])]])],new Map([["a",2],["b",new Map([["a",[]],["b",1]])]])],[[!0,new Map([["a",new Map([["a",[1,2]]])]]),new Map([["a",new Map([["a",[3,4]]])]])],new Map([["a",new Map([["a",[3,4]]])]])]])e.deepEqual(a.Tools.class.extend(...t[0]),t[1]);e.strictEqual(a.Tools.class.extend([1,2],void 0),void 0),e.strictEqual(a.Tools.class.extend([1,2],null),null);const t={a:[1,2]};a.Tools.class.extend(!0,t,{a:[3,4]}),e.deepEqual(t,{a:[3,4]})}),this.test(`getSubstructure (${e})`,e=>{for(const t of[[[{},[]],{}],[[{a:1},["a"]],1],[[{a:{a:null}},"a.a"],null],[[{a:{a:[]}},"a.a"],[]],[[{a:{b:{c:3}}},["a","b.c"]],3]])e.deepEqual(a.Tools.class.getSubstructure(...t[0]),t[1])}),this.test(`getProxyHandler (${e})`,e=>{e.ok(a.Tools.class.isPlainObject(a.Tools.class.getProxyHandler({}))),e.ok(a.Tools.class.isPlainObject(a.Tools.class.getProxyHandler(new Map,{get:"get"})))}),this.test(`modifyObject (${e})`,e=>{for(const t of[[[{},{}],{},{}],[[{a:2},{}],{a:2},{}],[[{a:2},{b:1}],{a:2},{b:1}],[[{a:2},{__remove__:"a"}],{},{}],[[{a:2},{__remove__:["a"]}],{},{}],[[{a:[2]},{a:{__prepend__:1}}],{a:[1,2]},{}],[[{a:[2]},{a:{__remove__:1}}],{a:[2]},{}],[[{a:[2,1]},{a:{__remove__:1}}],{a:[2]},{}],[[{a:[2,1]},{a:{__remove__:[1,2]}}],{a:[]},{}],[[{a:[1]},{a:{__remove__:1}}],{a:[]},{}],[[{a:[1]},{a:{__remove__:[1,2]}}],{a:[]},{}],[[{a:[2]},{a:{__append__:1}}],{a:[2,1]},{}],[[{a:[2]},{a:{__append__:[1,2]}}],{a:[2,1,2]},{}],[[{a:[2]},{a:{__append__:[1,2]},b:1}],{a:[2,1,2]},{b:1}],[[{a:[2]},{a:{add:[1,2]},b:1},"rm","unshift","add"],{a:[2,1,2]},{b:1}],[[{a:[2]},{a:{__prepend__:1}},"_r","_p"],{a:[2]},{a:{__prepend__:1}}],[[{a:[2]},{a:{__prepend__:[1,3]}}],{a:[1,3,2]},{}],[[{a:[2]},{a:{__append__:[1,2],__prepend__:"s"}}],{a:["s",2,1,2]},{}],[[{a:[2,2]},{a:{__prepend__:"s",__remove__:2}}],{a:["s",2]},{}],[[{a:[2,2]},{a:{__prepend__:"s",__remove__:[2,2]}}],{a:["s"]},{}],[[{a:[2,1,2]},{a:{__prepend__:"s",__remove__:[2,2],__append__:"a"}}],{a:["s",1,"a"]},{}]])e.deepEqual(a.Tools.class.modifyObject(...t[0]),t[1]),e.deepEqual(t[0][1],t[2])}),this.test("normalizeDateTime",e=>{e.equal(typeof a.Tools.class.normalizeDateTime(),"object");const t=new Date;for(const s of[[t,t],[1.2,new Date(1200)],["1.2",new Date(1200)],["08:55",new Date(1970,0,1,8,55)],[1,new Date(1e3)],["2/1/1970",new Date(1970,1,1)],[.001,new Date(Date.UTC(1970,0,1,0,0,0,1))],[new Date(1970,0,1,8,30),new Date(1970,0,1,8,30)],["abc",null],["1+1+1970 08+30+00",null]])e.ok(a.Tools.class.equals(a.Tools.class.normalizeDateTime(s[0],!1),s[1]))}),this.test("removeKeys",e=>{for(const t of[[{},[],{}],[new Set,"#",new Set],[new Map,[],new Map],[5,[],5],["a",[],"a"],[[],[],[]],[{a:2,b:3},["a"],{b:3}],[{a:2,a0:2,b:3},["a"],{b:3}],[new Map([["3",["a:to remove"]],["a",3]]),"a",new Map([["3",[]]])],[[{a:["#:comment","value","#: remove"]}],"#",[{a:["value"]}]],[[{a:new Set(["#:comment","value","#: remove"])}],"#",[{a:new Set(["value"])}]],[[{a:new Map([["#","comment"],["key","value"],["#","remove"]])}],"#",[{a:new Map([["key","value"]])}]]])e.deepEqual(a.Tools.class.removeKeys(t[0],t[1]),t[2])}),this.test("represent",e=>{for(const t of[[[""],'""'],[[{a:"A",b:123,c:null,d:["a",1,null]}],'{\n                    a: "A",\n                    b: 123,\n                    c: null,\n                    d: [\n                        "a",\n                        1,\n                        null\n                    ]\n                }'.replace(/(\n) {16}/g,"$1")]])e.deepEqual(a.Tools.class.represent(...t[0]),t[1])}),this.test(`sort (${e})`,e=>{for(const t of[[[],[]],[{},[]],[[1],[0]],[[1,2,3],[0,1,2]],[[3,2,1],[0,1,2]],[[2,3,1],[0,1,2]],[{1:2,2:5,3:"a"},["1","2","3"]],[{2:2,1:5,"-5":"a"},["-5","1","2"]],[{3:2,2:5,1:"a"},["1","2","3"]],[{a:2,b:5,c:"a"},["a","b","c"]],[{c:2,b:5,a:"a"},["a","b","c"]],[{b:2,c:5,z:"a"},["b","c","z"]]])e.deepEqual(a.Tools.class.sort(t[0]),t[1])}),this.test(`unwrapProxy (${e})`,e=>{for(const t of[[{},{}],[{a:"a"},{a:"a"}],[{a:"aa"},{a:"aa"}],[{a:{__target__:2,__revoke__:()=>{}}},{a:2}]])e.deepEqual(a.Tools.class.unwrapProxy(t[0]),t[1])}),this.test(`arrayAggregatePropertyIfEqual (${e})`,e=>{for(const t of[[[[{a:"b"}],"a"],"b"],[[[{a:"b"},{a:"b"}],"a"],"b"],[[[{a:"b"},{a:"c"}],"a"],""],[[[{a:"b"},{a:"c"}],"a",!1],!1]])e.strictEqual(a.Tools.class.arrayAggregatePropertyIfEqual(...t[0]),t[1])}),this.test(`arrayDeleteEmptyItems (${e})`,e=>{for(const t of[[[[{a:null}]],[]],[[[{a:null,b:2}]],[{a:null,b:2}]],[[[{a:null,b:2}],["a"]],[]],[[[],["a"]],[]],[[[]],[]]])e.deepEqual(a.Tools.class.arrayDeleteEmptyItems(...t[0]),t[1])}),this.test(`arrayExtract (${e})`,e=>{for(const t of[[[[{a:"b",c:"d"}],["a"]],[{a:"b"}]],[[[{a:"b",c:"d"}],["b"]],[{}]],[[[{a:"b",c:"d"}],["c"]],[{c:"d"}]],[[[{a:"b",c:"d"},{a:3}],["c"]],[{c:"d"},{}]],[[[{a:"b",c:"d"},{c:3}],["c"]],[{c:"d"},{c:3}]]])e.deepEqual(a.Tools.class.arrayExtract(...t[0]),t[1])}),this.test(`arrayExtractIfMatches (${e})`,e=>{for(const t of[[["b"],/b/,["b"]],[["b"],"b",["b"]],[["b"],"a",[]],[[],"a",[]],[["a","b"],"",["a","b"]],[["a","b"],"^$",[]],[["a","b"],"b",["b"]],[["a","b"],"[ab]",["a","b"]]])e.deepEqual(a.Tools.class.arrayExtractIfMatches(t[0],t[1]),t[2])}),this.test(`arrayExtractIfPropertyExists (${e})`,e=>{for(const t of[[[{a:2}],"a",[{a:2}]],[[{a:2}],"b",[]],[[],"b",[]],[[{a:2},{b:3}],"a",[{a:2}]]])e.deepEqual(a.Tools.class.arrayExtractIfPropertyExists(t[0],t[1]),t[2])}),this.test(`arrayExtractIfPropertyMatches (${e})`,e=>{for(const t of[[[{a:"b"}],{a:"b"},[{a:"b"}]],[[{a:"b"}],{a:"."},[{a:"b"}]],[[{a:"b"}],{a:"a"},[]],[[],{a:"a"},[]],[[{a:2}],{b:/a/},[]],[[{mimeType:"text/x-webm"}],{mimeType:/^text\/x-webm$/},[{mimeType:"text/x-webm"}]]])e.deepEqual(a.Tools.class.arrayExtractIfPropertyMatches(t[0],t[1]),t[2])}),this.test(`arrayIntersect (${e})`,e=>{for(const t of[[[["A"],["A"]],["A"]],[[["A","B"],["A"]],["A"]],[[[],[]],[]],[[[5],[]],[]],[[[{a:2}],[{a:2}]],[{a:2}]],[[[{a:3}],[{a:2}]],[]],[[[{a:3}],[{b:3}]],[]],[[[{a:3}],[{b:3}],["b"]],[]],[[[{a:3}],[{b:3}],["b"],!1],[]],[[[{b:null}],[{b:null}],["b"]],[{b:null}]],[[[{b:null}],[{b:void 0}],["b"]],[]],[[[{b:null}],[{b:void 0}],["b"],!1],[{b:null}]],[[[{b:null}],[{}],["b"],!1],[{b:null}]],[[[{b:void 0}],[{}],["b"],!1],[{b:void 0}]],[[[{}],[{}],["b"],!1],[{}]],[[[{b:null}],[{}],["b"]],[]],[[[{b:void 0}],[{}],["b"],!0],[{b:void 0}]],[[[{b:1}],[{a:1}],{b:"a"},!0],[{b:1}]]])e.deepEqual(a.Tools.class.arrayIntersect(...t[0]),t[1])}),this.test(`arrayMakeRange (${e})`,e=>{for(const t of[[[[0]],[0]],[[[5]],[0,1,2,3,4,5]],[[[]],[]],[[[2,5]],[2,3,4,5]],[[[2,10],2],[2,4,6,8,10]]])e.deepEqual(a.Tools.class.arrayMakeRange(...t[0]),t[1])}),this.test(`arrayMerge (${e})`,e=>{for(const t of[[[],[],[]],[[1],[],[1]],[[],[1],[1]],[[1],[1],[1,1]],[[1,2,3,1],[1,2,3],[1,2,3,1,1,2,3]]])e.deepEqual(a.Tools.class.arrayMerge(t[0],t[1]),t[2])}),this.test(`arrayMake (${e})`,e=>{for(const t of[[[],[]],[[1,2,3],[1,2,3]],[1,[1]]])e.deepEqual(a.Tools.class.arrayMake(t[0]),t[1])}),this.test(`arrayPermutate (${e})`,e=>{for(const t of[[[],[[]]],[[1],[[1]]],[[1,2],[[1,2],[2,1]]],[[1,2,3],[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]],[["1","2","3"],[["1","2","3"],["1","3","2"],["2","1","3"],["2","3","1"],["3","1","2"],["3","2","1"]]]])e.deepEqual(a.Tools.class.arrayPermutate(t[0]),t[1])}),this.test(`arrayPermutateLength (${e})`,e=>{for(const t of[[[],[]],[[1],[[1]]],[[1,2],[[1],[2],[1,2]]],[[1,2,3],[[1],[2],[3],[1,2],[1,3],[2,3],[1,2,3]]],[["1","2","3"],[["1"],["2"],["3"],["1","2"],["1","3"],["2","3"],["1","2","3"]]]])e.deepEqual(a.Tools.class.arrayPermutateLength(t[0]),t[1])}),this.test(`arrayUnique (${e})`,e=>{for(const t of[[[1,2,3,1],[1,2,3]],[[1,2,3,1,2,3],[1,2,3]],[[],[]],[[1,2,3],[1,2,3]]])e.deepEqual(a.Tools.class.arrayUnique(t[0]),t[1])}),this.test(`arraySumUpProperty (${e})`,e=>{for(const t of[[[[{a:2},{a:3}],"a"],5],[[[{a:2},{b:3}],"a"],2],[[[{a:2},{b:3}],"c"],0]])e.strictEqual(a.Tools.class.arraySumUpProperty(...t[0]),t[1])}),this.test(`arrayAppendAdd (${e})`,e=>{const t={};for(const s of[[[{},{},"b"],{b:[{}]}],[[t,{a:3},"b"],{b:[{a:3}]}],[[t,{a:3},"b"],{b:[{a:3},{a:3}]}],[[{b:[2]},2,"b",!1],{b:[2,2]}],[[{b:[2]},2,"b"],{b:[2]}]])e.deepEqual(a.Tools.class.arrayAppendAdd(...s[0]),s[1])}),this.test(`arrayRemove (${e})`,e=>{for(const t of[[[[],2],[]],[[[2],2],[]],[[[2],2,!0],[]],[[[1,2],2],[1]],[[[1,2],2,!0],[1]]])e.deepEqual(a.Tools.class.arrayRemove(...t[0]),t[1]);e.throws(()=>a.Tools.class.arrayRemove([],2,!0),new Error("Given target doesn't exists in given list."))}),this.test(`arraySortTopological (${e})`,e=>{for(const t of[[{},[]],[{a:[]},["a"]],[{a:"b"},["b","a"]],[{a:[],b:"a"},["a","b"]],[{a:[],b:["a"]},["a","b"]],[{a:["b"],b:[]},["b","a"]],[{c:"b",a:[],b:["a"]},["a","b","c"]],[{b:["a"],a:[],c:["a","b"]},["a","b","c"]]])e.deepEqual(a.Tools.class.arraySortTopological(t[0]),t[1]);for(const t of[{a:"a"},{a:"b",b:"a"},{a:"b",b:"c",c:"a"}])e.throws(()=>a.Tools.class.arraySortTopological(t))}),this.test("stringEscapeRegularExpressions",e=>{for(const t of[[[""],""],[["that's no regex: .*$"],"that's no regex: \\.\\*\\$"],[["-\\[]()^$*+.}-","}"],"\\-\\\\[\\]\\(\\)\\^\\$\\*\\+\\.}\\-"],[["-\\[]()^$*+.{}-",["[","]","(",")","^","$","*","+",".","{"]],"\\-\\[]()^$*+.{\\}\\-"],[["-","\\"],"\\-"]])e.strictEqual(a.Tools.class.stringEscapeRegularExpressions(...t[0]),t[1])}),this.test("stringConvertToValidVariableName",e=>{for(const t of[["",""],["a","a"],["_a","_a"],["_a_a","_a_a"],["_a-a","_aA"],["-a-a","aA"],["-a--a","aA"],["--a--a","aA"]])e.strictEqual(a.Tools.class.stringConvertToValidVariableName(t[0]),t[1])}),this.test(`stringEncodeURIComponent (${e})`,e=>{for(const t of[[[""],""],[[" "],"+"],[[" ",!0],"%20"],[["@:$, "],"@:$,+"],[["+"],"%2B"]])e.strictEqual(a.Tools.class.stringEncodeURIComponent(...t[0]),t[1])}),this.test(`stringAddSeparatorToPath (${e})`,e=>{for(const t of[[[""],""],[["/"],"/"],[["/a"],"/a/"],[["/a/bb/"],"/a/bb/"],[["/a/bb"],"/a/bb/"],[["/a/bb","|"],"/a/bb|"],[["/a/bb/","|"],"/a/bb/|"]])e.strictEqual(a.Tools.class.stringAddSeparatorToPath(...t[0]),t[1])}),this.test(`stringHasPathPrefix (${e})`,e=>{for(const t of[["/admin","/admin"],["test","test"],["",""],["a","a/b"],["a/","a/b"],["/admin","/admin#test","#"]])e.ok(a.Tools.class.stringHasPathPrefix(...t));for(const t of[["b","a/b"],["b/","a/b"],["/admin/","/admin/test","#"],["/admin","/admin/test","#"]])e.notOk(a.Tools.class.stringHasPathPrefix(...t))}),this.test(`stringGetDomainName (${e})`,e=>{for(const t of[[["https://www.test.de/site/subSite?param=value#hash"],"www.test.de"],[["a",!0],!0],[["http://www.test.de"],"www.test.de"],[["http://a.de"],"a.de"],[["http://localhost"],"localhost"],[["localhost","a"],"a"],[["a",a.global.location.hostname],a.global.location.hostname],[["//a"],"a"],[["a/site/subSite?param=value#hash",a.global.location.hostname],a.global.location.hostname],[["/a/site/subSite?param=value#hash",a.global.location.hostname],a.global.location.hostname],[["//alternate.local/a/site/subSite?param=value#hash"],"alternate.local"],[["//alternate.local/"],"alternate.local"]])e.strictEqual(a.Tools.class.stringGetDomainName(...t[0]),t[1])}),this.test(`stringGetPortNumber (${e})`,e=>{for(const t of[[["https://www.test.de/site/subSite?param=value#hash"],443],[["http://www.test.de"],80],[["http://www.test.de",!0],!0],[["www.test.de",!0],!0],[["a",!0],!0],[["a",!0],!0],[["a:80"],80],[["a:20"],20],[["a:444"],444],[["http://localhost:89"],89],[["https://localhost:89"],89]])e.strictEqual(a.Tools.class.stringGetPortNumber(...t[0]),t[1])}),this.test(`stringGetProtocolName (${e})`,e=>{for(const t of[[["https://www.test.de/site/subSite?param=value#hash"],"https"],[["http://www.test.de"],"http"],[["//www.test.de",a.global.location.protocol.substring(0,a.global.location.protocol.length-1)],a.global.location.protocol.substring(0,a.global.location.protocol.length-1)],[["http://a.de"],"http"],[["ftp://localhost"],"ftp"],[["a",a.global.location.protocol.substring(0,a.global.location.protocol.length-1)],a.global.location.protocol.substring(0,a.global.location.protocol.length-1)],[["a/site/subSite?param=value#hash",a.global.location.protocol.substring(0,a.global.location.protocol.length-1)],a.global.location.protocol.substring(0,a.global.location.protocol.length-1)],[["/a/site/subSite?param=value#hash","a"],"a"],[["alternate.local/a/site/subSite?param=value#hash","b"],"b"],[["alternate.local/","c"],"c"],[["",a.global.location.protocol.substring(0,a.global.location.protocol.length-1)],a.global.location.protocol.substring(0,a.global.location.protocol.length-1)]])e.strictEqual(a.Tools.class.stringGetProtocolName(...t[0]),t[1])}),this.test(`stringGetURLVariable (${e})`,e=>{e.ok(Array.isArray(a.Tools.class.stringGetURLVariable())),e.ok(Array.isArray(a.Tools.class.stringGetURLVariable(null,"&"))),e.ok(Array.isArray(a.Tools.class.stringGetURLVariable(null,"#")));for(const t of[[["notExisting"],null],[["notExisting","&"],null],[["notExisting","#"],null],[["test","?test=2"],"2"],[["test","test=2"],"2"],[["test","test=2&a=2"],"2"],[["test","b=3&test=2&a=2"],"2"],[["test","?b=3&test=2&a=2"],"2"],[["test","?b=3&test=2&a=2"],"2"],[["test","&","$","!","","#$test=2"],"2"],[["test","&","$","!","?test=4","#$test=3"],"4"],[["a","&","$","!","?test=4","#$test=3"],null],[["test","#","$","!","?test=4","#$test=3"],"3"],[["test","#","$","!","","#!test#$test=4"],"4"],[["test","#","$","!","","#!/test/a#$test=4"],"4"],[["test","#","$","!","","#!/test/a/#$test=4"],"4"],[["test","#","$","!","","#!test/a/#$test=4"],"4"],[["test","#","$","!","","#!/#$test=4"],"4"],[["test","#","$","!","","#!test?test=3#$test=4"],"4"],[["test","&","?","!",null,"#!a?test=3"],"3"],[["test","&","$","!",null,"#!test#$test=4"],"4"],[["test","&","$","!",null,"#!test?test=3#$test=4"],"4"]])e.strictEqual(a.Tools.class.stringGetURLVariable(...t[0]),t[1])}),this.test(`stringIsInternalURL (${e})`,e=>{for(const t of[["https://www.test.de/site/subSite?param=value#hash","https://www.test.de/site/subSite?param=value#hash"],["//www.test.de/site/subSite?param=value#hash","//www.test.de/site/subSite?param=value#hash"],[`${a.global.location.protocol}//www.test.de/site/subSite`+"?param=value#hash",`${a.global.location.protocol}//www.test.de/site/subSite`+"?param=value#hash"],["https://www.test.de:443/site/subSite?param=value#hash","https://www.test.de/site/subSite?param=value#hash"],["//www.test.de:80/site/subSite?param=value#hash","//www.test.de/site/subSite?param=value#hash"],[a.global.location.href,a.global.location.href],["1",a.global.location.href],["#1",a.global.location.href],["/a",a.global.location.href]])e.ok(a.Tools.class.stringIsInternalURL(...t));for(const t of[[`${a.global.location.protocol}//www.test.de/site/subSite`+"?param=value#hash","ftp://www.test.de/site/subSite?param=value#hash"],["https://www.test.de/site/subSite?param=value#hash","http://www.test.de/site/subSite?param=value#hash"],["http://www.test.de/site/subSite?param=value#hash","test.de/site/subSite?param=value#hash"],[`${a.global.location.protocol}//www.test.de:`+`${a.global.location.port}/site/subSite`+"?param=value#hash/site/subSite?param=value#hash"],[`http://www.test.de:${a.global.location.port}/site/subSite?`+"param=value#hash","https://www.test.de/site/subSite?param=value#hash"]])e.notOk(a.Tools.class.stringIsInternalURL(...t))}),this.test(`stringNormalizeURL (${e})`,e=>{for(const t of[["www.test.com","http://www.test.com"],["test","http://test"],["http://test","http://test"],["https://test","https://test"]])e.strictEqual(a.Tools.class.stringNormalizeURL(t[0]),t[1])}),this.test(`stringRepresentURL (${e})`,e=>{for(const t of[["http://www.test.com","www.test.com"],["ftp://www.test.com","ftp://www.test.com"],["https://www.test.com","www.test.com"],[void 0,""],[null,""],[!1,""],[!0,""],["",""],[" ",""]])e.strictEqual(a.Tools.class.stringRepresentURL(t[0]),t[1])}),this.test(`stringCamelCaseToDelimited (${e})`,e=>{for(const t of[[["hansPeter"],"hans-peter"],[["hansPeter","|"],"hans|peter"],[[""],""],[["h"],"h"],[["hP",""],"hp"],[["hansPeter"],"hans-peter"],[["hans-peter"],"hans-peter"],[["hansPeter","_"],"hans_peter"],[["hansPeter","+"],"hans+peter"],[["Hans"],"hans"],[["hansAPIURL","-",["api","url"]],"hans-api-url"],[["hansPeter","-",[]],"hans-peter"]])e.strictEqual(a.Tools.class.stringCamelCaseToDelimited(...t[0]),t[1])}),this.test(`stringCapitalize (${e})`,e=>{for(const t of[["hansPeter","HansPeter"],["",""],["a","A"],["A","A"],["AA","AA"],["Aa","Aa"],["aa","Aa"]])e.strictEqual(a.Tools.class.stringCapitalize(t[0]),t[1])}),this.test(`stringCompressStyleValue (${e})`,e=>{for(const t of[["",""],[" border: 1px  solid red;","border:1px solid red"],["border : 1px solid red ","border:1px solid red"],["border : 1px  solid red ;","border:1px solid red"],["border : 1px  solid red   ; ","border:1px solid red"],["height: 1px ; width:2px ; ","height:1px;width:2px"],[";;height: 1px ; width:2px ; ;","height:1px;width:2px"],[" ;;height: 1px ; width:2px ; ;","height:1px;width:2px"],[";height: 1px ; width:2px ; ","height:1px;width:2px"]])e.strictEqual(a.Tools.class.stringCompressStyleValue(t[0]),t[1])}),this.test(`stringDecodeHTMLEntities (${e})`,e=>{for(const t of[["",""],["<div></div>","<div></div>"],["<div>&amp;</div>","<div>&</div>"],["<div>&amp;&auml;&Auml;&uuml;&Uuml;&ouml;&Ouml;</div>","<div>&äÄüÜöÖ</div>"]])e.equal(a.Tools.class.stringDecodeHTMLEntities(t[0]),t[1])}),this.test(`stringDelimitedToCamelCase (${e})`,e=>{for(const t of[[["hans-peter"],"hansPeter"],[["hans|peter","|"],"hansPeter"],[[""],""],[["h"],"h"],[["hans-peter"],"hansPeter"],[["hans--peter"],"hans-Peter"],[["Hans-Peter"],"HansPeter"],[["-Hans-Peter"],"-HansPeter"],[["-"],"-"],[["hans-peter","_"],"hans-peter"],[["hans_peter","_"],"hansPeter"],[["hans_id","_"],"hansID"],[["url_hans_id","_",["hans"]],"urlHANSId"],[["url_hans_1","_"],"urlHans1"],[["hansUrl1","-",["url"],!0],"hansUrl1"],[["hans-url","-",["url"],!0],"hansURL"],[["hans-Url","-",["url"],!0],"hansUrl"],[["hans-Url","-",["url"],!1],"hansURL"],[["hans-Url","-",[],!1],"hansUrl"],[["hans--Url","-",[],!1,!0],"hansUrl"]])e.strictEqual(a.Tools.class.stringDelimitedToCamelCase(...t[0]),t[1])}),this.test(`stringFindNormalizedMatchRange (${e})`,e=>{for(const t of[[["",""],null],[["hans",""],null],[["hans","a"],[1,2]],[["hans","an"],[1,3]],[["hans","han"],[0,3]],[["hans","hans"],[0,4]],[["hans","ans"],[1,4]],[["hans hans","ans"],[1,4]],[[" hAns ","ans",e=>e.toLowerCase()],[2,5]],[["a straße b","strasse",e=>e.replace(/ß/g,"ss").toLowerCase()],[2,8]],[["a strasse b","strasse",e=>e.replace(/ß/g,"ss").toLowerCase()],[2,9]],[["a strasse b","straße",e=>e.replace(/ß/g,"ss").toLowerCase()],[2,9]]])e.deepEqual(a.Tools.class.stringFindNormalizedMatchRange(...t[0]),t[1])}),this.test(`stringFormat (${e})`,e=>{for(const t of[[["{1}","test"],"test"],[["","test"],""],[["{1}"],"{1}"],[["{1} test {2} - {2}",1,2],"1 test 2 - 2"]])e.strictEqual(a.Tools.class.stringFormat(...t[0]),t[1])}),this.test(`stringGetEditDistance (${e})`,e=>{for(const t of[["","",0],["h","h",0],["hans","hans",0],["hans","hansa",1],["hansa","hans",1],["hans","hbns",1],["hbns","hans",1],["hbbs","hans",2],["beer","hans",4]])e.strictEqual(a.Tools.class.stringGetEditDistance(t[0],t[1]),t[2])}),this.test(`stringGetRegularExpressionValidated (${e})`,e=>{for(const t of[["that's no regex: .*$","that's no regex: \\.\\*\\$"],["",""],["-[]()^$*+.}-\\","\\-\\[\\]\\(\\)\\^\\$\\*\\+\\.\\}\\-\\\\"],["-","\\-"]])e.strictEqual(a.Tools.class.stringGetRegularExpressionValidated(t[0]),t[1])}),this.test(`stringInterpretDateTime (${e})`,e=>{for(const t of[["",null],["01:00",new Date(1970,0,1,1)],["08:55",new Date(1970,0,1,8,55)],["01:02",new Date(1970,0,1,1,2)],["01:00:00",new Date(1970,0,1,1)],["01:02:00",new Date(1970,0,1,1,2)],["01:02:03",new Date(1970,0,1,1,2,3)],["01:02:03:0",new Date(1970,0,1,1,2,3)],["01:02:03:4",new Date(1970,0,1,1,2,3,4)],["1.1.1970",new Date(1970,0,1)],["1.2.1970",new Date(1970,1,1)],["1.1.1970 10",new Date(1970,0,1,10)],["1.1.1970 10:30",new Date(1970,0,1,10,30)],["1.1.1970 10:30:30",new Date(1970,0,1,10,30,30)],["2014-11-26 08:30:00",new Date(2014,10,26,8,30)],["2014-11-26T08:30:00",new Date(2014,10,26,8,30)],["2014-11-26T08:30:00+01:00",new Date(Date.UTC(2014,10,26,7,30))],["2014-11-10T08:30:00+01:00",new Date(Date.UTC(2014,10,10,7,30))],["2014-11-10T08:30:00+02:00",new Date(Date.UTC(2014,10,10,6,30))],["1.1.1970 08:30:00",new Date(1970,0,1,8,30)],["Mo. 1.1.1970",new Date(1970,0,1)],["Di. 2.1.1970",new Date(1970,0,2)],["Fr. 3.1.1970",new Date(1970,0,3)],["3.Jan.1970",new Date(1970,0,3)],["3. Jan. 1970",new Date(1970,0,3)],["3. mai. 1970",new Date(1970,4,3)],["3. may 1970",new Date(1970,4,3)],["3. märz 1970",new Date(1970,2,3)],["3. Dezember 1970",new Date(1970,11,3)]])e.ok(a.Tools.class.equals(a.Tools.class.stringInterpretDateTime(t[0],!1),t[1]))}),this.test(`stringLowerCase (${e})`,e=>{for(const t of[["HansPeter","hansPeter"],["",""],["A","a"],["a","a"],["aa","aa"],["Aa","aa"],["aa","aa"]])e.strictEqual(a.Tools.class.stringLowerCase(t[0]),t[1])}),this.test(`stringMark (${e})`,e=>{for(const t of[[[""],""],[["test","e"],'t<span class="tools-mark">e</span>st'],[["test","es"],'t<span class="tools-mark">es</span>t'],[["test","test"],'<span class="tools-mark">test</span>'],[["test",""],"test"],[["test","tests"],"test"],[["","test"],""],[["test","e","<a>{1}</a>"],"t<a>e</a>st"],[["test",["e"],"<a>{1}</a>"],"t<a>e</a>st"],[["test","E","<a>{1}</a>"],"t<a>e</a>st"],[["test","E","<a>{1}</a>"],"t<a>e</a>st"],[["tesT","t","<a>{1}</a>"],"<a>t</a>es<a>T</a>"],[["tesT","t","<a>{1} - {1}</a>"],"<a>t - t</a>es<a>T - T</a>"],[["test","E","<a>{1}</a>",e=>`${e}`],"test"],[["abcd",["a","c"]],'<span class="tools-mark">a</span>b<span class="tools-mark">c</span>d'],[["aabcd",["a","c"]],'<span class="tools-mark">a</span><span class="tools-mark">a</span>b<span class="tools-mark">c</span>d'],[["acbcd",["a","c","d"]],'<span class="tools-mark">a</span><span class="tools-mark">c</span>b<span class="tools-mark">c</span><span class="tools-mark">d</span>'],[["a EBikes München",["ebikes","münchen"],"<a>{1}</a>",e=>`${e}`.toLowerCase()],"a <a>EBikes</a> <a>München</a>"],[["a E-Bikes München",["ebikes","münchen"],"<a>{1}</a>",e=>`${e}`.toLowerCase().replace("-","")],"a <a>E-Bikes</a> <a>München</a>"],[["a str. 2",["straße","2"],"<a>{1}</a>",e=>`${e}`.toLowerCase().replace("str.","strasse").replace("ß","ss")],"a <a>str.</a> <a>2</a>"],[["EGO Movement Store E-Bikes München",["eBikes","München"],"<a>{1}</a>",e=>`${e}`.toLowerCase().replace(/[-_]+/g,"").replace(/ß/g,"ss").replace(/(^| )str\./g,"$1strasse").replace(/[& ]+/g," ")],"EGO Movement Store <a>E-Bikes</a> <a>München</a>"],[["str.A strasse B straße C str. D",["str."],"<a>{1}</a>",e=>`${e}`.toLowerCase().replace(/[-_]+/g,"").replace(/ß/g,"ss").replace(/(^| )str\./g,"$1strasse").replace(/[& ]+/g," ")],"<a>str.</a>A <a>strasse</a> B <a>straße</a> C <a>str.</a> D"]])e.strictEqual(a.Tools.class.stringMark(...t[0]),t[1])}),this.test(`stringMD5 (${e})`,e=>{for(const t of[[[""],"d41d8cd98f00b204e9800998ecf8427e"],[["test"],"098f6bcd4621d373cade4e832627b4f6"],[["ä"],"8419b71c87a225a2c70b50486fbee545"],[["test",!0],"098f6bcd4621d373cade4e832627b4f6"],[["ä",!0],"c15bcc5577f9fade4b4a3256190a59b0"]])e.strictEqual(a.Tools.class.stringMD5(...t[0]),t[1])}),this.test(`stringNormalizePhoneNumber (${e})`,e=>{for(const t of[["0","0"],[" 0  ","0"],[0,"0"],[12345,"12345"],["+49 172 (0) / 0212 - 3","0049172002123"]])e.strictEqual(a.Tools.class.stringNormalizePhoneNumber(t[0]),t[1]);for(const t of[["0","0"],[" 0  ","0"],[0,"0"],[12345,"12345"],["+49 (0) 176-12 34-56","0049-176-1234-56"],["+49(0)176 12-34 56","0049-176-123456"],["+49 176 12 34 56","0049-176-123456"],["+49-176-12 34 56","0049-176-123456"],["0172/12555433","0172-12555433"],["0176 12 34 56","0176-123456"],["01761 234 56","01761-23456"],["+49 (178) 12 34 56","0049-178-123456"],["+49(178)123456","0049-178-123456"],["+49(178)12345-6","0049-178-12345-6"],["+49 (178) 123 45-6","0049-178-12345-6"],["06132-77-0","06132-77-0"],["06132-77-0 ","06132-77-0"],["06132-77-0a","06132-770"],["06132-77-0a ","06132-770"],["  06132-77-0a ","06132-770"],["  061 32-77-0a ","06132-770"],["  061 32-77-0 ","06132-77-0"],["  0061 32-77-0 ","0061-32-77-0"],["  +61 32-77-0 ","0061-32-77-0"],["05661-711677","05661-711677"],["0174/5661677","0174-5661677"],["+49 (0) 174 / 566 16 77","0049-174-5661677"],["+49 (174) 566 16 77","0049-174-5661677"],[" +49 (174) 566 16 77 ","0049-174-5661677"],["02 91 / 14 55","0291-1455"],["03677842375","03677842375"]])e.strictEqual(a.Tools.class.stringNormalizePhoneNumber(t[0],!1),t[1])}),this.test(`stringNormalizeZipCode (${e})`,e=>{for(const t of[["0","0"],[" 0  ","0"],[0,"0"],[12345,"12345"],["abc",""],["1B23A45","12345"],[" 1B23A45 ","12345"]])e.strictEqual(a.Tools.class.stringNormalizeZipCode(t[0]),t[1])}),this.test("stringParseEncodedObject",e=>{for(const t of[[[""],null],[["null"],null],[["{a: undefined}"],{a:void 0}],[[Buffer.from("{a: undefined}").toString("base64")],{a:void 0}],[["{a: 2}"],{a:2}],[[Buffer.from("{a: 1}").toString("base64")],{a:1}],[["null"],null],[[Buffer.from("null").toString("base64")],null],[["{}"],{}],[[Buffer.from("{}").toString("base64")],{}],[["{a: a}"],null],[[Buffer.from("{a: a}").toString("base64")],null],[["{a: scope.a}",{a:2}],{a:2}],[[Buffer.from("{a: scope.a}").toString("base64"),{a:2}],{a:2}]])e.deepEqual(a.Tools.class.stringParseEncodedObject(...t[0]),t[1])}),this.test(`stringSliceAllExceptNumberAndLastSeperator (${e})`,e=>{for(const t of[["12-34-56","1234-56"],["12 34 56","123456"],["123456","123456"]])e.strictEqual(a.Tools.class.stringSliceAllExceptNumberAndLastSeperator(t[0]),t[1])}),this.test(`stringRepresentPhoneNumber (${e})`,e=>{for(const t of[["0","0"],["0172-12321-1","+49 (0) 172 / 123 21-1"],["0172-123211","+49 (0) 172 / 12 32 11"],["0172-1232111","+49 (0) 172 / 123 21 11"],[void 0,""],[null,""],[!1,""],[!0,""],["",""],[" ",""]])e.strictEqual(a.Tools.class.stringRepresentPhoneNumber(t[0]),t[1])}),this.test(`stringSliceWeekday (${e})`,e=>{for(const t of[["",""],["a","a"],["1.1.1970","1.1.1970"],["Do. 1.1.1970","1.1.1970"],["We. 1.1.1970","1.1.1970"],["Mo. 1.1.1970","1.1.1970"],["Mo. 10","10"],["Mo. ","Mo. "]])e.strictEqual(a.Tools.class.stringSliceWeekday(t[0]),t[1])}),this.test(`stringNormalizeDomNodeSelector (${e})`,e=>{for(const t of[["div","body div"],["div p","body div p"],["body div","body div"],["body div p","body div p"],["","body"]])e.strictEqual(o.stringNormalizeDomNodeSelector(t[0]),t[1]);for(const t of["","div","div, p"])e.strictEqual(a.Tools({domNodeSelectorPrefix:""}).stringNormalizeDomNodeSelector(t),t)}),this.test(`numberGetUTCTimestamp (${e})`,e=>{for(const t of[[[new Date(0)],0],[[new Date(1)],.001],[[new Date(0),!0],0],[[new Date(1e3),!1],1],[[new Date(1e3),!0],1e3],[[new Date(0),!1],0]])e.strictEqual(a.Tools.class.numberGetUTCTimestamp(...t[0]),t[1])}),this.test(`numberIsNotANumber (${e})`,e=>{for(const t of[[NaN,!0],[{},!1],[void 0,!1],[(new Date).toString(),!1],[null,!1],[!1,!1],[!0,!1],[0,!1]])e.strictEqual(a.Tools.class.numberIsNotANumber(t[0]),t[1])}),this.test(`numberRound (${e})`,e=>{for(const t of[[[1.5,0],2],[[1.4,0],1],[[1.4,-1],0],[[1e3,-2],1e3],[[999,-2],1e3],[[950,-2],1e3],[[949,-2],900],[[1.2345],1],[[1.2345,2],1.23],[[1.2345,3],1.235],[[1.2345,4],1.2345],[[699,-2],700],[[650,-2],700],[[649,-2],600]])e.strictEqual(a.Tools.class.numberRound(...t[0]),t[1])}),this.test("checkReachability",async e=>{const t=e.async();for(const s of[["unknownURL",!1],["unknownURL",!1,301],["http://unknownHostName",!0,200,.025],["http://unknownHostName",!0,[200],.025],["http://unknownHostName",!0,[200,301],.025]])try{await a.Tools.class.checkReachability(...s),e.ok(!1)}catch(t){e.ok(!0)}t()}),this.test("checkUnreachability",async e=>{const t=e.async();for(const s of[["unknownURL",!1,10,.1,200],["unknownURL",!0,10,.1,200],["unknownURL",!0,10,.1,[200]],["unknownURL",!0,10,.1,[200,301]],["http://unknownHostName",!0]])try{await a.Tools.class.checkUnreachability(...s),e.ok(!0)}catch(t){e.ok(!1)}t()}),void 0!==t&&"web"===t&&"full"===e&&(this.test(`sendToIFrame (${e})`,e=>{const t=a("<iframe>").hide().attr("name","test");a("body").append(t),e.ok(a.Tools.class.sendToIFrame(t,window.document.URL,{test:5},"get",!0))}),this.test(`sendToExternalURL (${e})`,e=>e.ok(o.sendToExternalURL(window.document.URL,{test:5})))),this.test(`copyDirectoryRecursive (${e})`,async e=>{const t=e.async();e.ok((await a.Tools.class.copyDirectoryRecursive("./node_modules/.bin","./copyDirectoryRecursiveTest.compiled",a.Tools.class.noop)).endsWith("/copyDirectoryRecursiveTest.compiled")),removeDirectoryRecursivelySync("./copyDirectoryRecursiveTest.compiled"),t()}),this.test(`copyDirectoryRecursiveSync (${e})`,e=>{e.ok(a.Tools.class.copyDirectoryRecursiveSync("./node_modules/.bin","./copyDirectoryRecursiveTestSync.compiled",a.Tools.class.noop).endsWith("/copyDirectoryRecursiveTestSync.compiled")),removeDirectoryRecursivelySync("./copyDirectoryRecursiveTestSync.compiled")}),this.test(`copyFile (${e})`,async t=>{const s=t.async();let o="";try{o=await a.Tools.class.copyFile(path.resolve("./",path.basename(__filename)),`./test.${e}.compiled.js`)}catch(e){console.error(e)}t.ok(o.endsWith(`./test.${e}.compiled.js`)),await clientnode__WEBPACK_IMPORTED_MODULE_0___default.a.timeout(),synchronousFileSystem.unlinkSync(`./test.${e}.compiled.js`),s()}),this.test(`copyFileSync (${e})`,e=>{e.ok(a.Tools.class.copyFileSync(path.resolve("./",path.basename(__filename)),"./synctest.compiled.js").endsWith("/synctest.compiled.js")),synchronousFileSystem.unlinkSync("./synctest.compiled.js")}),this.test(`isDirectory (${e})`,async e=>{const t=e.async();for(const t of["./","../"]){let s;try{s=await a.Tools.class.isDirectory(t)}catch(e){console.error(e)}e.ok(s)}for(const t of[path.resolve("./",path.basename(__filename))]){let s;try{s=await a.Tools.class.isDirectory(t)}catch(e){console.error(e)}e.notOk(s)}t()}),this.test(`isDirectorySync (${e})`,e=>{for(const t of["./","../"])e.ok(a.Tools.class.isDirectorySync(t));for(const t of[path.resolve("./",path.basename(__filename))])e.notOk(a.Tools.class.isDirectorySync(t))}),this.test(`isFile (${e})`,async e=>{const t=e.async();for(const t of[path.resolve("./",path.basename(__filename))]){let s;try{s=await a.Tools.class.isFile(t)}catch(e){console.error(e)}e.ok(s)}for(const t of["./","../"]){let s;try{s=await a.Tools.class.isFile(t)}catch(e){console.error(e)}e.notOk(s)}t()}),this.test(`isFileSync (${e})`,e=>{for(const t of[path.resolve("./",path.basename(__filename))])e.ok(a.Tools.class.isFileSync(t));for(const t of["./","../"])e.notOk(a.Tools.class.isFileSync(t))}),this.test(`walkDirectoryRecursively (${e})`,async e=>{const t=e.async(),s=[],o=e=>(s.push(e),null);let l=[];try{l=await a.Tools.class.walkDirectoryRecursively("./",o)}catch(e){console.error(e)}e.strictEqual(l.length,1),e.ok(l[0].hasOwnProperty("path")),e.ok(l[0].hasOwnProperty("stats")),e.strictEqual(s.length,1),t()}),this.test(`walkDirectoryRecursivelySync (${e})`,e=>{const t=[],s=a.Tools.class.walkDirectoryRecursivelySync("./",e=>(t.push(e),null));e.strictEqual(s.length,1),e.ok(s[0].hasOwnProperty("path")),e.ok(s[0].hasOwnProperty("stats")),e.strictEqual(t.length,1)}),this.test(`getProcessCloseHandler (${e})`,e=>e.strictEqual(typeof a.Tools.class.getProcessCloseHandler(()=>{},()=>{}),"function")),this.test(`handleChildProcess (${e})`,e=>{class t extends __webpack_require__(10).Duplex{_read(){}_write(e,t,a){a(new Error("test"))}}const s=new t,o=new t,l=new ChildProcess;l.stdout=s,l.stderr=o,e.strictEqual(a.Tools.class.handleChildProcess(l),l)}),"full"===e&&this.test(`_bindEventHelper (${e})`,e=>{for(const t of[[["body"]],[["body"],!0],[["body"],!1,"bind"]])e.ok(o._bindEventHelper(...t))})},closeWindow:!1,roundTypes:[]}];QUnit.config=clientnode__WEBPACK_IMPORTED_MODULE_0___default.a.extend(QUnit.config||{},{autostart:!1,testTimeout:3e4,scrolltop:!1});let testRan=!1;weboptimizer_browserAPI_compiled__WEBPACK_IMPORTED_MODULE_1___default()(browserAPI=>clientnode__WEBPACK_IMPORTED_MODULE_0___default.a.timeout(()=>{for(const e of[{link:{attributes:{href:"/node_modules/qunit/qunit/qunit.css",rel:"stylesheet",type:"text/css"},inject:browserAPI.window.document.getElementsByTagName("head")[0]}},{div:{attributes:{id:"qunit"},inject:browserAPI.window.document.body}},{div:{attributes:{id:"qunit-fixture"},inject:browserAPI.window.document.body}}]){const t=Object.keys(e)[0],a=browserAPI.window.document.createElement(t);for(const s in e[t].attributes)e[t].attributes.hasOwnProperty(s)&&a.setAttribute(s,e[t].attributes[s]);e[t].inject.appendChild(a)}testRan=!0;const testPromises=[];let closeWindow=!1;for(const test of tests){test.closeWindow&&(closeWindow=!0);for(const roundType of["plain","document","full"])if(0===test.roundTypes.length||test.roundTypes.includes(roundType)){try{delete __webpack_require__.c[0],delete __webpack_require__.c[1]}catch(e){}for(const request of["clientnode","jquery","jquery/dist/jquery","jquery/dist/jquery.js","jquery/dist/jquery.min","jquery/dist/jquery.min.js","jquery/dist/jquery.min"])try{eval("delete require.cache[require.resolve('"+`${request}')]`)}catch(e){}let $,$bodyDomNode,tools;if("plain"===roundType)browserAPI.window.$=null,$=__webpack_require__(0).$,tools=$.Tools();else{if("full"===roundType){for(const e of["document","Element","HTMLElement","matchMedia","Node"])e in global||(global[e]=browserAPI.window[e]);browserAPI.window.$=__webpack_require__(1)}$=__webpack_require__(0).$,$.context=browserAPI.window.document,$bodyDomNode=$("body"),tools=$bodyDomNode.Tools()}const testPromise=test.callback.call(QUnit,roundType,"node",$,browserAPI,tools,$bodyDomNode);"object"==typeof testPromise&&testPromise&&"then"in testPromise&&testPromises.push(testPromise)}}Promise.all(testPromises).then(()=>{closeWindow&&browserAPI.window.close(),QUnit.start()}).catch(e=>{throw e})}));let testRegistered=!1;__webpack_exports__.default=function(e,t=[],a=!1){const s=[].concat(t);if(testRan)throw new Error("You have to register your tests immediately after importing the library.");return testRegistered||(testRegistered=!0,tests=[]),tests.push({callback:e,closeWindow:a,roundTypes:s}),tests}}.call(this,"/index.js")},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__5__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__6__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__7__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__8__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__9__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__10__}])});